callback = Proc.new { |p|
  print(p)
  puts("called")
}

led1 = GPIO.new( 13, GPIO::OUT )
sw1  = GPIO.new( 34, GPIO::IN, GPIO::PULL_UP )
sw2  = GPIO.new( 35, GPIO::IN, GPIO::PULL_UP )

sw1.irq(callback)

while true

  if (sw1.read == 1)
    led1.write(1)
  else
    led1.write(0)
  end

  if(sw2.read == 1)
    led1.setpullmode(GPIO::PULL_HOLD)
  else
    led1.setpullmode(nil)
  end
  sleep 1
end