callback = Proc.new { |p|
  print(p)
  puts("called")
}

led1 = Pin.new( 13, Pin::OUT )
sw1  = Pin.new( 34, Pin::IN, Pin::PULL_UP )
sw2  = Pin.new( 35, Pin::IN, Pin::PULL_UP )

sw1.irq(callback)

while true

  if (sw1.value == 1)
    led1.on
  else
    led1.off
  end

  if(sw2.value == 1)
    led1.set_pull_mode(Pin::PULL_HOLD)
  else
    led1.set_pull_mode(nil)
  end
  sleep 1
end